async function initClient() {
    await gapi.client.init({
        apiKey: API_KEY,
        clientId: CLIENT_ID,
        discoveryDocs: DISCOVERY_DOCS,
        scope: SCOPES
    });

    const isSignedIn = gapi.auth2.getAuthInstance().isSignedIn.get();
    if (!isSignedIn) {
        await gapi.auth2.getAuthInstance().signIn(); // 請求用戶登入
    }
}

document.getElementById('uploadBtn').onclick = async function() {
    const isSignedIn = gapi.auth2.getAuthInstance().isSignedIn.get();
    if (!isSignedIn) {
        alert('請先登入 Google 帳號');
        return;
    }
    
    const fileInput = document.getElementById('fileInput');
    const file = fileInput.files[0];
    if (!file) {
        alert('請選擇檔案');
        return;
    }
    
    try {
        const accessToken = gapi.auth.getToken().access_token;
        // 構建檔案元數據和上傳邏輯
    } catch (error) {
        console.error('Error retrieving access token: ', error);
        alert('無法獲取存取權杖，請檢查是否已登入');
    }
};
